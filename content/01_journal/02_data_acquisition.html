<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Muhammad Adrian">
<title>MyLabJournal - Data Acquisition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_tidyverse.html">
 <span class="dropdown-text">01 Tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_data_acquisition.html">
 <span class="dropdown-text">02 Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/03_data_wrangling.html">
 <span class="dropdown-text">03 Data Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_data_visualization.html">
 <span class="dropdown-text">04 Data Visualization</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
<li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link active" data-scroll-target="#data-acquisition"><span class="toc-section-number">1</span>  Data acquisition</a></li>
  <li>
<a href="#challenge-1" id="toc-challenge-1" class="nav-link" data-scroll-target="#challenge-1"><span class="toc-section-number">2</span>  Challenge 1</a>
  <ul class="collapse">
<li><a href="#source-code" id="toc-source-code" class="nav-link" data-scroll-target="#source-code"><span class="toc-section-number">2.1</span>  Source Code</a></li>
  </ul>
</li>
  <li>
<a href="#challenge-2" id="toc-challenge-2" class="nav-link" data-scroll-target="#challenge-2"><span class="toc-section-number">3</span>  Challenge 2</a>
  <ul class="collapse">
<li><a href="#source-code-1" id="toc-source-code-1" class="nav-link" data-scroll-target="#source-code-1"><span class="toc-section-number">3.1</span>  Source Code</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data Acquisition</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Muhammad Adrian </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><section id="data-acquisition" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data acquisition</h1>
<p>In this section, process of importing data or data acquisition is acquired in detail. Therefore, imported data can further be viewed, stored, and analyzed. Web scraping process is introduced to gather available data on the internet. Connecting to database and acquiring the data from web will be presented.</p>
</section><section id="challenge-1" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Challenge 1</h1>
<p>Getting weather forecast data for 7-day in average in Hamburg.</p>
<section id="source-code" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="source-code">
<span class="header-section-number">2.1</span> Source Code</h2>
<div class="cell" data-hash="02_data_acquisition_cache/html/unnamed-chunk-1_a36bf0ccfef5890db03a5441a72f87f7">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load library</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-3"><a href="#cb1-3"></a>resp <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"https://api.open-meteo.com/v1/forecast?latitude=53.55&amp;longitude=9.99&amp;hourly=temperature_2m&amp;timeformat=unixtime"</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; 
#&gt; Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; The following objects are masked from 'package:stats':
#&gt; 
#&gt;     filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; The following objects are masked from 'package:base':
#&gt; 
#&gt;     intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>resp_tbl <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  resp<span class="sc">$</span>content <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">rawToChar</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">fromJSON</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  .[[<span class="dv">9</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>resp_tbl<span class="sc">$</span>time <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(resp_tbl<span class="sc">$</span>time, <span class="at">origin=</span><span class="st">"1970-01-01"</span>)</span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co"># Step 2 - Visualize</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-14"><a href="#cb5-14"></a>  </span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="co"># Setup canvas with the columns year (x-axis) and sales (y-axis)</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>  <span class="fu">ggplot</span>(<span class="at">data=</span>resp_tbl, <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> temperature_2m, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>  </span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="co"># Geometries</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"cyan"</span>) <span class="sc">+</span> <span class="co"># Use geom_line(color) for a color line</span></span>
<span id="cb5-20"><a href="#cb5-20"></a></span>
<span id="cb5-21"><a href="#cb5-21"></a>  <span class="co"># Formatting</span></span>
<span id="cb5-22"><a href="#cb5-22"></a></span>
<span id="cb5-23"><a href="#cb5-23"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-24"><a href="#cb5-24"></a>    <span class="at">title    =</span> <span class="st">"Weather forecast in Hamburg"</span>,</span>
<span id="cb5-25"><a href="#cb5-25"></a>    <span class="at">subtitle =</span> <span class="st">"for 7 days"</span>,</span>
<span id="cb5-26"><a href="#cb5-26"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="co"># Override defaults for x and y</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>    <span class="at">y =</span> <span class="st">"Temperature 2m"</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    ) <span class="sc">+</span> </span>
<span id="cb5-29"><a href="#cb5-29"></a>    <span class="fu">theme</span>(</span>
<span id="cb5-30"><a href="#cb5-30"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb5-31"><a href="#cb5-31"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section></section><section id="challenge-2" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Challenge 2</h1>
<p>Rose bike website scrape for small database that contains the model. names and prices.</p>
<section id="source-code-1" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="source-code-1">
<span class="header-section-number">3.1</span> Source Code</h2>
<div class="cell" data-hash="02_data_acquisition_cache/html/unnamed-chunk-2_369bc52786d75ad18b3a80d11c6e1ab2">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># WEBSCRAPING ----</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co"># 1.0 LIBRARIES ----</span></span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">library</span>(tidyverse) <span class="co"># Main Package - Loads dplyr, purrr, etc.</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="fu">library</span>(rvest)     <span class="co"># HTML Hacking &amp; Web Scraping</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">library</span>(xopen)     <span class="co"># Quickly opening URLs</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">library</span>(jsonlite)  <span class="co"># converts JSON files to R objects</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="fu">library</span>(glue)      <span class="co"># concatenate strings</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="fu">library</span>(stringi)   <span class="co"># character string/text processing</span></span>
<span id="cb6-11"><a href="#cb6-11"></a></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co"># 1.1 ROSE HOME PRODUCTS FAMILIES ----</span></span>
<span id="cb6-13"><a href="#cb6-13"></a></span>
<span id="cb6-14"><a href="#cb6-14"></a>url_home          <span class="ot">&lt;-</span> <span class="st">"https://www.rosebikes.com/"</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="fu">xopen</span>(url_home) <span class="co"># Open links directly from RStudio to inspect them</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Running open 'https://www.rosebikes.com/'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Read in the HTML for the entire webpage</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>html_home         <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_home)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># Web scrape the ids for the families</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>rose_home_tbl <span class="ot">&lt;-</span> html_home <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  </span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="co"># Get the nodes for the families ...</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">".js-main-navigation__item-button"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="co"># ...and extract the information of the id attribute</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">html_attr</span>(<span class="st">'href'</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  </span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="co"># Remove the product families Gear and Outlet and Woman </span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="co"># (because the female bikes are also listed with the others)</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">discard</span>(<span class="at">.p =</span> <span class="sc">~</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(.x,<span class="st">"clothing|parts|accessories|sale|brands"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  </span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="co"># Convert vector to tibble</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"home_class"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  </span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="co"># Add a hashtag so we can get nodes of the categories by id (#)</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-21"><a href="#cb8-21"></a>    <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://www.rosebikes.com/{home_class}"</span>)</span>
<span id="cb8-22"><a href="#cb8-22"></a>  )</span>
<span id="cb8-23"><a href="#cb8-23"></a></span>
<span id="cb8-24"><a href="#cb8-24"></a>url_bikes <span class="ot">&lt;-</span> rose_home_tbl<span class="sc">$</span>url</span>
<span id="cb8-25"><a href="#cb8-25"></a>url_bikes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; https://www.rosebikes.com//bikes</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># 1.1 COLLECT PRODUCT FAMILIES ----</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">xopen</span>(url_bikes) <span class="co"># Open links directly from RStudio to inspect them</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Running open 'https://www.rosebikes.com//bikes'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Read in the HTML for the entire webpage</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>html_bikes         <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_bikes)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Web scrape the ids for the families</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>bike_family_tbl <span class="ot">&lt;-</span> html_bikes <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>  </span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="co"># Get the nodes for the families ...</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">".catalog-navigation__link"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="co"># ...and extract the information of the id attribute</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">html_attr</span>(<span class="st">'href'</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11"></a></span>
<span id="cb12-12"><a href="#cb12-12"></a>  <span class="co"># Remove the product families Gear and Outlet and Woman </span></span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="co"># (because the female bikes are also listed with the others)</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="fu">discard</span>(<span class="at">.p =</span> <span class="sc">~</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(.x,<span class="st">"urban|short-delivery"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>  </span>
<span id="cb12-16"><a href="#cb12-16"></a>  <span class="co"># Convert vector to tibble</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"family_class"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>  </span>
<span id="cb12-19"><a href="#cb12-19"></a>  <span class="co"># Add a hashtag so we can get nodes of the categories by id (#)</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-21"><a href="#cb12-21"></a>    <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://www.rosebikes.com/{family_class}"</span>)</span>
<span id="cb12-22"><a href="#cb12-22"></a>  )</span>
<span id="cb12-23"><a href="#cb12-23"></a></span>
<span id="cb12-24"><a href="#cb12-24"></a></span>
<span id="cb12-25"><a href="#cb12-25"></a><span class="co"># 2.0 COLLECT BIKE DATA ----</span></span>
<span id="cb12-26"><a href="#cb12-26"></a></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co"># 2.1 Get URL for each bike of the Product categories</span></span>
<span id="cb12-28"><a href="#cb12-28"></a></span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="co"># select first bike category url</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>bike_category_url <span class="ot">&lt;-</span> bike_family_tbl<span class="sc">$</span>url[<span class="dv">1</span>]</span>
<span id="cb12-31"><a href="#cb12-31"></a><span class="fu">xopen</span>(bike_category_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Running open 'https://www.rosebikes.com//bikes/mtb'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Get the URLs for the bikes of the first category</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>html_bike_category  <span class="ot">&lt;-</span> <span class="fu">read_html</span>(bike_category_url)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>bike_url_tbl        <span class="ot">&lt;-</span> html_bike_category <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5"></a></span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="co"># Get the 'a' nodes, which are hierarchally underneath </span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="co"># the class productTile__contentWrapper</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">".catalog-category-bikes__button"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="fu">html_attr</span>(<span class="st">"href"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>  </span>
<span id="cb14-11"><a href="#cb14-11"></a>  <span class="co"># Convert vector to tibble</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"bike_model_class"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>  </span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="co"># Add a hashtag so we can get nodes of the categories by id (#)</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-16"><a href="#cb14-16"></a>    <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://www.rosebikes.com/{bike_model_class}"</span>)</span>
<span id="cb14-17"><a href="#cb14-17"></a>  )</span>
<span id="cb14-18"><a href="#cb14-18"></a></span>
<span id="cb14-19"><a href="#cb14-19"></a></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="co"># 2.1.2 Extract the price (since we have retrieved the data already)</span></span>
<span id="cb14-21"><a href="#cb14-21"></a>bike_price_tbl <span class="ot">&lt;-</span> html_bike_category <span class="sc">%&gt;%</span></span>
<span id="cb14-22"><a href="#cb14-22"></a>  </span>
<span id="cb14-23"><a href="#cb14-23"></a>  <span class="co"># Get the nodes in the meta tag where the attribute itemprop equals description</span></span>
<span id="cb14-24"><a href="#cb14-24"></a>  <span class="fu">html_nodes</span>(<span class="st">".catalog-category-bikes__price-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-25"><a href="#cb14-25"></a>  </span>
<span id="cb14-26"><a href="#cb14-26"></a>  <span class="co"># Extract the content of the attribute content</span></span>
<span id="cb14-27"><a href="#cb14-27"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-28"><a href="#cb14-28"></a></span>
<span id="cb14-29"><a href="#cb14-29"></a>  <span class="co"># Convert vector to tibble</span></span>
<span id="cb14-30"><a href="#cb14-30"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"price"</span>) </span>
<span id="cb14-31"><a href="#cb14-31"></a></span>
<span id="cb14-32"><a href="#cb14-32"></a>bike_price_tbl<span class="sc">$</span>price <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'[from €,]'</span>,<span class="st">''</span>,(bike_price_tbl<span class="sc">$</span>price))</span>
<span id="cb14-33"><a href="#cb14-33"></a>bike_price_tbl<span class="sc">$</span>price <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(bike_price_tbl<span class="sc">$</span>price)</span>
<span id="cb14-34"><a href="#cb14-34"></a></span>
<span id="cb14-35"><a href="#cb14-35"></a><span class="co"># 2.2 Wrap it into a function ----</span></span>
<span id="cb14-36"><a href="#cb14-36"></a></span>
<span id="cb14-37"><a href="#cb14-37"></a>get_bike_data <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb14-38"><a href="#cb14-38"></a>  </span>
<span id="cb14-39"><a href="#cb14-39"></a>  html_bike_category <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb14-40"><a href="#cb14-40"></a>  </span>
<span id="cb14-41"><a href="#cb14-41"></a>  <span class="co"># Get the URLs</span></span>
<span id="cb14-42"><a href="#cb14-42"></a>  bike_url_tbl  <span class="ot">&lt;-</span> html_bike_category <span class="sc">%&gt;%</span></span>
<span id="cb14-43"><a href="#cb14-43"></a>    <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">".catalog-category-bikes__button"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-44"><a href="#cb14-44"></a>    <span class="fu">html_attr</span>(<span class="st">"href"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-45"><a href="#cb14-45"></a>    <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"bike_model_class"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-46"><a href="#cb14-46"></a>    <span class="fu">mutate</span>(</span>
<span id="cb14-47"><a href="#cb14-47"></a>      <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://www.rosebikes.com/{bike_model_class}"</span>)</span>
<span id="cb14-48"><a href="#cb14-48"></a>    )</span>
<span id="cb14-49"><a href="#cb14-49"></a>  <span class="co"># Get the price</span></span>
<span id="cb14-50"><a href="#cb14-50"></a>  bike_price_tbl <span class="ot">&lt;-</span> html_bike_category <span class="sc">%&gt;%</span></span>
<span id="cb14-51"><a href="#cb14-51"></a>    <span class="fu">html_nodes</span>(<span class="st">".catalog-category-bikes__price-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-52"><a href="#cb14-52"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-53"><a href="#cb14-53"></a>    <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"position"</span>, <span class="at">value =</span> <span class="st">"price_in_Euro"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-54"><a href="#cb14-54"></a>    <span class="fu">left_join</span>(bike_url_tbl)</span>
<span id="cb14-55"><a href="#cb14-55"></a>}</span>
<span id="cb14-56"><a href="#cb14-56"></a></span>
<span id="cb14-57"><a href="#cb14-57"></a>bike_category_url <span class="ot">&lt;-</span> bike_family_tbl<span class="sc">$</span>url[<span class="dv">1</span>]</span>
<span id="cb14-58"><a href="#cb14-58"></a>bike_data_tbl     <span class="ot">&lt;-</span> <span class="fu">get_bike_data</span>(<span class="at">url =</span> bike_category_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(position)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>bike_data_tbl<span class="sc">$</span>bike_model_class <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'-/-'</span>,<span class="st">'-'</span>,(bike_data_tbl<span class="sc">$</span>bike_model_class))</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co"># 2.3.1a Map the function against all urls</span></span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co"># Extract the urls as a character vector</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>bike_category_url_vec <span class="ot">&lt;-</span> bike_family_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="fu">pull</span>(url)</span>
<span id="cb16-8"><a href="#cb16-8"></a></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co"># Run the function with every url as an argument</span></span>
<span id="cb16-10"><a href="#cb16-10"></a>bike_data_lst <span class="ot">&lt;-</span> <span class="fu">map</span>(bike_category_url_vec, get_bike_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(position)`
#&gt; Joining with `by = join_by(position)`
#&gt; Joining with `by = join_by(position)`
#&gt; Joining with `by = join_by(position)`
#&gt; Joining with `by = join_by(position)`
#&gt; Joining with `by = join_by(position)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Merge the list into a tibble</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>bike_data_tbl <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(bike_data_lst)</span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="fu">saveRDS</span>(bike_data_tbl, <span class="st">"bike_data_tbl.rds"</span>)</span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a>bike_data_tbl<span class="sc">$</span>bike_model_class <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'-/-'</span>,<span class="st">'-'</span>,(bike_data_tbl<span class="sc">$</span>bike_model_class))</span>
<span id="cb18-6"><a href="#cb18-6"></a></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co"># Filter non Canyon bikes (based on id length) and add an empty column for the colors</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>bike_data_cleaned_tbl <span class="ot">&lt;-</span> bike_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  </span>
<span id="cb18-10"><a href="#cb18-10"></a>  <span class="co"># Filter for bikes. Only unique ones</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>  </span>
<span id="cb18-12"><a href="#cb18-12"></a>  <span class="co"># Split categories ()</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>  <span class="fu">separate</span>(<span class="at">col =</span> bike_model_class,</span>
<span id="cb18-14"><a href="#cb18-14"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"empty"</span>,</span>
<span id="cb18-15"><a href="#cb18-15"></a>                    <span class="st">"product"</span>,</span>
<span id="cb18-16"><a href="#cb18-16"></a>                    <span class="st">"model"</span>,</span>
<span id="cb18-17"><a href="#cb18-17"></a>                    <span class="st">"ride_type"</span>,</span>
<span id="cb18-18"><a href="#cb18-18"></a>                    <span class="st">"ride_style"</span>),</span>
<span id="cb18-19"><a href="#cb18-19"></a>           <span class="at">sep =</span> <span class="st">"/"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-20"><a href="#cb18-20"></a></span>
<span id="cb18-21"><a href="#cb18-21"></a>  <span class="co"># Select and order columns</span></span>
<span id="cb18-22"><a href="#cb18-22"></a></span>
<span id="cb18-23"><a href="#cb18-23"></a>  <span class="fu">select</span>(product, model, ride_type, ride_style, url, price_in_Euro)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Expected 5 pieces. Missing pieces filled with `NA` in 9 rows [12, 13, 14, 15,
#&gt; 16, 17, 18, 19, 20].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>bike_data_cleaned_tbl<span class="sc">$</span>price_in_Euro <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'[from €,]'</span>,<span class="st">''</span>,(bike_data_cleaned_tbl<span class="sc">$</span>price_in_Euro))</span>
<span id="cb20-2"><a href="#cb20-2"></a>bike_data_cleaned_tbl<span class="sc">$</span>price_in_Euro <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(bike_data_cleaned_tbl<span class="sc">$</span>price_in_Euro)</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a>bike_data_cleaned_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["product"],"name":[1],"type":["chr"],"align":["left"]},{"label":["model"],"name":[2],"type":["chr"],"align":["left"]},{"label":["ride_type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["ride_style"],"name":[4],"type":["chr"],"align":["left"]},{"label":["url"],"name":[5],"type":["glue"],"align":["right"]},{"label":["price_in_Euro"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"bikes","2":"mtb","3":"cross-country","4":"count-solo","5":"https://www.rosebikes.com//bikes/mtb/cross-country/count-solo","6":"749"},{"1":"bikes","2":"mtb","3":"cross-country","4":"psycho-path","5":"https://www.rosebikes.com//bikes/mtb/cross-country/psycho-path","6":"1499"},{"1":"bikes","2":"mtb","3":"cross-country","4":"thrill-hill","5":"https://www.rosebikes.com//bikes/mtb/cross-country/thrill-hill","6":"2999"},{"1":"bikes","2":"mtb","3":"trail-enduro","4":"ground-control","5":"https://www.rosebikes.com//bikes/mtb/trail-/-enduro/ground-control","6":"1999"},{"1":"bikes","2":"mtb","3":"trail-enduro","4":"root-miller","5":"https://www.rosebikes.com//bikes/mtb/trail-/-enduro/root-miller","6":"2299"},{"1":"bikes","2":"mtb","3":"trail-enduro","4":"bonero","5":"https://www.rosebikes.com//bikes/mtb/trail-/-enduro/bonero","6":"1499"},{"1":"bikes","2":"mtb","3":"freeride","4":"soul-fire","5":"https://www.rosebikes.com//bikes/mtb/freeride/soul-fire","6":"2599"},{"1":"bikes","2":"mtb","3":"dirt","4":"the-bruce","5":"https://www.rosebikes.com//bikes/mtb/dirt/the-bruce","6":"899"},{"1":"bikes","2":"road","3":"race","4":"xlite","5":"https://www.rosebikes.com//bikes/road/race/xlite","6":"2999"},{"1":"bikes","2":"road","3":"endurance","4":"pro-sl","5":"https://www.rosebikes.com//bikes/road/endurance/pro-sl","6":"1099"},{"1":"bikes","2":"road","3":"endurance","4":"reveal","5":"https://www.rosebikes.com//bikes/road/endurance/reveal","6":"2499"},{"1":"bikes","2":"gravel","3":"backroad-al","4":"NA","5":"https://www.rosebikes.com//bikes/gravel/backroad-al","6":"1999"},{"1":"bikes","2":"gravel","3":"backroad","4":"NA","5":"https://www.rosebikes.com//bikes/gravel/backroad","6":"2499"},{"1":"bikes","2":"gravel","3":"backroad-limited","4":"NA","5":"https://www.rosebikes.com//bikes/gravel/backroad-limited","6":"4499"},{"1":"bikes","2":"hybrid","3":"black-lava","4":"NA","5":"https://www.rosebikes.com//bikes/hybrid/black-lava","6":"1999"},{"1":"bikes","2":"hybrid","3":"multisport-trekking","4":"NA","5":"https://www.rosebikes.com//bikes/hybrid/multisport-trekking","6":"1249"},{"1":"bikes","2":"fitness","3":"multicross","4":"NA","5":"https://www.rosebikes.com//bikes/fitness/multicross","6":"2599"},{"1":"bikes","2":"fitness","3":"multistreet-fitness","4":"NA","5":"https://www.rosebikes.com//bikes/fitness/multistreet-fitness","6":"1399"},{"1":"bikes","2":"touring","3":"backroad-al-randonneur","4":"NA","5":"https://www.rosebikes.com//bikes/touring/backroad-al-randonneur","6":"2499"},{"1":"bikes","2":"touring","3":"backroad-randonneur","4":"NA","5":"https://www.rosebikes.com//bikes/touring/backroad-randonneur","6":"3299"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Save data as RDS</span></span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="fu">saveRDS</span>(bike_data_cleaned_tbl, <span class="st">"bike_data_cleaned_tbl.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","openEffect":"zoom","selector":".lightbox","loop":true,"descPosition":"bottom"});</script>


</body></html>