<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Muhammad Adrian">
<title>MyLabJournal - Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_tidyverse.html">
 <span class="dropdown-text">01 Tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_data_acquisition.html">
 <span class="dropdown-text">02 Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/03_data_wrangling.html">
 <span class="dropdown-text">03 Data Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_data_visualization.html">
 <span class="dropdown-text">04 Data Visualization</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
<li><a href="#data-visualization" id="toc-data-visualization" class="nav-link active" data-scroll-target="#data-visualization"><span class="toc-section-number">1</span>  Data visualization</a></li>
  <li>
<a href="#challenge-1" id="toc-challenge-1" class="nav-link" data-scroll-target="#challenge-1"><span class="toc-section-number">2</span>  Challenge 1</a>
  <ul class="collapse">
<li><a href="#source-code-result" id="toc-source-code-result" class="nav-link" data-scroll-target="#source-code-result"><span class="toc-section-number">2.1</span>  Source Code &amp; Result</a></li>
  </ul>
</li>
  <li>
<a href="#challenge-2" id="toc-challenge-2" class="nav-link" data-scroll-target="#challenge-2"><span class="toc-section-number">3</span>  Challenge 2</a>
  <ul class="collapse">
<li><a href="#source-code-result-1" id="toc-source-code-result-1" class="nav-link" data-scroll-target="#source-code-result-1"><span class="toc-section-number">3.1</span>  Source Code &amp; Result</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data Visualization</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Muhammad Adrian </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><section id="data-visualization" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data visualization</h1>
<p>In this section, the important process of data visualization is acquired in detail. Therefore, data can further be visualized for the importance of exploratory data analysis. Moreover, the concept of ggplot2 for building different data graphics and craft effective visualization for big data is introduced.</p>
</section><section id="challenge-1" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Challenge 1</h1>
<p>Map the time course of the cumulative Covid-19 cases.</p>
<section id="source-code-result" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="source-code-result">
<span class="header-section-number">2.1</span> Source Code &amp; Result</h2>
<div class="cell" data-hash="04_data_visualization_cache/html/unnamed-chunk-1_59f1161246e576507c4e8714440d0389">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># 1.0 LOAD LIBRARY ----</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># 2.0 DATA IMPORT ----</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a>covid_data_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://covid.ourworldindata.org/data/owid-covid-data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 307912 Columns: 67
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr   (4): iso_code, continent, location, tests_units
#&gt; dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...
#&gt; date  (1): date
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># 3.0 DATA WRANGLING ----</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># 3.1 Manipulate for continent = Europe</span></span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># Select columns and filter categories</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>total_case_continent_tbl <span class="ot">&lt;-</span> covid_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  </span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">select</span>(continent, location, date, total_cases) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  </span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="co"># Filter only Europe</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span> date <span class="sc">&lt;</span> <span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  </span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="co"># Group by category and summarize</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="fu">group_by</span>(continent,location,date) <span class="sc">%&gt;%</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="fu">summarise</span>(<span class="at">total_cases =</span> <span class="fu">sum</span>(total_cases)) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>  </span>
<span id="cb3-18"><a href="#cb3-18"></a>  <span class="co"># Replace all NA value to 0</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20"></a>  </span>
<span id="cb3-21"><a href="#cb3-21"></a>  <span class="co"># Group by category and summarize</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>  <span class="fu">group_by</span>(continent,date) <span class="sc">%&gt;%</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>  <span class="fu">summarise</span>(<span class="at">total_cases =</span> <span class="fu">sum</span>(total_cases)) <span class="sc">%&gt;%</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-25"><a href="#cb3-25"></a>  </span>
<span id="cb3-26"><a href="#cb3-26"></a>  <span class="co"># Rename column name</span></span>
<span id="cb3-27"><a href="#cb3-27"></a>  <span class="fu">rename</span>(<span class="st">'Continent/ Country'</span> <span class="ot">=</span> continent,</span>
<span id="cb3-28"><a href="#cb3-28"></a>         <span class="st">'Cumulative'</span> <span class="ot">=</span> total_cases)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; `summarise()` has grouped output by 'continent', 'location'. You can override
#&gt; using the `.groups` argument.
#&gt; `summarise()` has grouped output by 'continent'. You can override using the
#&gt; `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># 3.2 Manipulate for location = Germany, UK, France, Spain, US</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co"># Select columns and filter categories</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>total_case_location_tbl <span class="ot">&lt;-</span> covid_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  </span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">select</span>(location, date, total_cases) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Germany"</span>,<span class="st">"United Kingdom"</span>,<span class="st">"France"</span>,<span class="st">"Spain"</span>,<span class="st">"United States"</span>) <span class="sc">&amp;</span> date <span class="sc">&lt;</span> <span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  </span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="co"># Group by category and summarize</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>  <span class="fu">group_by</span>(location, date) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>  <span class="fu">summarise</span>(<span class="at">total_cases =</span> <span class="fu">sum</span>(total_cases)) <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  </span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="co"># Replace all NA value to 0</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>  </span>
<span id="cb5-17"><a href="#cb5-17"></a>  <span class="co"># Rename column name</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="fu">rename</span>(<span class="st">'Continent/ Country'</span> <span class="ot">=</span> location,</span>
<span id="cb5-19"><a href="#cb5-19"></a>         <span class="st">'Cumulative'</span> <span class="ot">=</span> total_cases)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; `summarise()` has grouped output by 'location'. You can override using the
#&gt; `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># 3.3 Join row from 2 tables</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>total_case_combined <span class="ot">&lt;-</span> total_case_continent_tbl <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">bind_rows</span>(total_case_location_tbl)</span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co"># 3.4 Create Date 4 days prior the Sys.Date due to data is not completed at Sys.Date</span></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a>n <span class="ot">=</span> <span class="fu">Sys.Date</span>()<span class="sc">-</span><span class="dv">4</span></span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co"># 3.5 Filter the last values to show labels on the plot</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>data_ends <span class="ot">&lt;-</span> total_case_combined <span class="sc">%&gt;%</span> </span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Continent/ Country</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-14"><a href="#cb7-14"></a>  <span class="fu">top_n</span>(<span class="dv">1</span>, date) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="04_data_visualization_cache/html/plot1_e68fe6f55259560909d8c26f6fe6d11b">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># 4.0 DATA VISUALIZATION ----</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">library</span>(scales)</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># Line Plot</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>total_case_combined <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  </span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span><span class="st">`</span><span class="at">Cumulative</span><span class="st">`</span>, <span class="at">group =</span> <span class="st">`</span><span class="at">Continent/ Country</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Continent/ Country</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  </span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks=</span><span class="st">"1 month"</span>, <span class="at">date_labels =</span> <span class="st">"%B'%y"</span>, <span class="at">limits =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">'2020-01-01'</span>,<span class="st">'2023-06-01'</span>)) ) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, </span>
<span id="cb8-16"><a href="#cb8-16"></a>                                                    <span class="at">prefix =</span> <span class="st">""</span>,</span>
<span id="cb8-17"><a href="#cb8-17"></a>                                                    <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  </span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">"Accent"</span>) <span class="sc">+</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>  </span>
<span id="cb8-21"><a href="#cb8-21"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-22"><a href="#cb8-22"></a>    <span class="at">title    =</span> <span class="st">"COVID-19 Confirmed Cases Worldwide"</span>,</span>
<span id="cb8-23"><a href="#cb8-23"></a>    <span class="at">subtitle =</span> <span class="fu">str_glue</span>(<span class="st">"As of {n}"</span>),</span>
<span id="cb8-24"><a href="#cb8-24"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="co"># Override defaults for x and y</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>    <span class="at">y =</span> <span class="st">"Cumulative Cases"</span></span>
<span id="cb8-26"><a href="#cb8-26"></a>  ) <span class="sc">+</span> </span>
<span id="cb8-27"><a href="#cb8-27"></a>  </span>
<span id="cb8-28"><a href="#cb8-28"></a><span class="fu">theme</span>(</span>
<span id="cb8-29"><a href="#cb8-29"></a>  <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb8-30"><a href="#cb8-30"></a>  <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb8-31"><a href="#cb8-31"></a>) <span class="sc">+</span></span>
<span id="cb8-32"><a href="#cb8-32"></a></span>
<span id="cb8-33"><a href="#cb8-33"></a><span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(Cumulative)), </span>
<span id="cb8-34"><a href="#cb8-34"></a>                <span class="at">data =</span> data_ends,</span>
<span id="cb8-35"><a href="#cb8-35"></a>                <span class="at">nudge_x =</span> <span class="dv">1</span>,</span>
<span id="cb8-36"><a href="#cb8-36"></a>                <span class="at">box.padding =</span> <span class="fl">0.5</span>,</span>
<span id="cb8-37"><a href="#cb8-37"></a>                <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
#&gt; ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="04_data_visualization_files/figure-html/plot1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="04_data_visualization_files/figure-html/plot1-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section></section><section id="challenge-2" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Challenge 2</h1>
<p>Visualize the distribution of the mortality rate (deaths/population).</p>
<section id="source-code-result-1" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="source-code-result-1">
<span class="header-section-number">3.1</span> Source Code &amp; Result</h2>
<div class="cell" data-hash="04_data_visualization_cache/html/unnamed-chunk-2_937001523e3ac3a993ffa4b2e593b0d2">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># 1.0 LOAD LIBRARY ----</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">library</span>(maps)</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="fu">library</span>(scales)</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># 2.0 DATA IMPORT ----</span></span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co"># 2.1 for world map</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>world <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"world"</span>)</span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co"># 2.2 for covid data</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>covid_data_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://covid.ourworldindata.org/data/owid-covid-data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 307912 Columns: 67
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr   (4): iso_code, continent, location, tests_units
#&gt; dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...
#&gt; date  (1): date
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># 3.0 DATA WRANGLING ----</span></span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># 3.1 Revise the location name to match with the world map data</span></span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a>covid_data_tbl <span class="ot">&lt;-</span> covid_data_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">mutate</span>(<span class="at">location =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-7"><a href="#cb12-7"></a>    </span>
<span id="cb12-8"><a href="#cb12-8"></a>    location <span class="sc">==</span> <span class="st">"United Kingdom"</span> <span class="sc">~</span> <span class="st">"UK"</span>,</span>
<span id="cb12-9"><a href="#cb12-9"></a>    location <span class="sc">==</span> <span class="st">"United States"</span> <span class="sc">~</span> <span class="st">"USA"</span>,</span>
<span id="cb12-10"><a href="#cb12-10"></a>    location <span class="sc">==</span> <span class="st">"Democratic Republic of Congo"</span> <span class="sc">~</span> <span class="st">"Democratic Republic of the Congo"</span>,</span>
<span id="cb12-11"><a href="#cb12-11"></a>    location <span class="sc">==</span> <span class="st">"Antigua and Barbuda"</span> <span class="sc">~</span> <span class="st">"Antigua"</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>    location <span class="sc">==</span> <span class="st">"Cote d'Ivoire"</span> <span class="sc">~</span> <span class="st">"Ivory Coast"</span>,</span>
<span id="cb12-13"><a href="#cb12-13"></a>    location <span class="sc">==</span> <span class="st">"Czechia"</span> <span class="sc">~</span> <span class="st">"Czech Republic"</span>,</span>
<span id="cb12-14"><a href="#cb12-14"></a>    location <span class="sc">==</span> <span class="st">"Timor"</span> <span class="sc">~</span> <span class="st">"Timor-Leste"</span>,</span>
<span id="cb12-15"><a href="#cb12-15"></a>    location <span class="sc">==</span> <span class="st">"Trinidad and Tobago"</span> <span class="sc">~</span> <span class="st">"Trinidad"</span>,</span>
<span id="cb12-16"><a href="#cb12-16"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> location</span>
<span id="cb12-17"><a href="#cb12-17"></a>    </span>
<span id="cb12-18"><a href="#cb12-18"></a>  )) </span>
<span id="cb12-19"><a href="#cb12-19"></a></span>
<span id="cb12-20"><a href="#cb12-20"></a></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co"># 3.2 Select columns and filter categories</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>mortality_rate_tbl <span class="ot">&lt;-</span> covid_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb12-23"><a href="#cb12-23"></a>  </span>
<span id="cb12-24"><a href="#cb12-24"></a>  <span class="fu">select</span>(location, date, total_deaths, population) <span class="sc">%&gt;%</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>  </span>
<span id="cb12-26"><a href="#cb12-26"></a>  <span class="co"># Replace all NA values to 0</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28"></a></span>
<span id="cb12-29"><a href="#cb12-29"></a>  <span class="co"># Create mortality rate column</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>  <span class="fu">group_by</span>(location) <span class="sc">%&gt;%</span></span>
<span id="cb12-31"><a href="#cb12-31"></a>  <span class="fu">mutate</span>(<span class="at">mortality_rate =</span> total_deaths <span class="sc">/</span> population) <span class="sc">%&gt;%</span></span>
<span id="cb12-32"><a href="#cb12-32"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-33"><a href="#cb12-33"></a></span>
<span id="cb12-34"><a href="#cb12-34"></a>  <span class="co"># Filter only certain date</span></span>
<span id="cb12-35"><a href="#cb12-35"></a>  <span class="fu">filter</span>(date <span class="sc">==</span> <span class="st">"2022-04-16"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-36"><a href="#cb12-36"></a>  </span>
<span id="cb12-37"><a href="#cb12-37"></a>  <span class="co"># Rename column name</span></span>
<span id="cb12-38"><a href="#cb12-38"></a>  <span class="fu">rename</span>(<span class="at">region =</span> location)</span>
<span id="cb12-39"><a href="#cb12-39"></a></span>
<span id="cb12-40"><a href="#cb12-40"></a><span class="co"># 3.3 Format as numeric value for mortality rate</span></span>
<span id="cb12-41"><a href="#cb12-41"></a>mortality_rate_tbl<span class="sc">$</span>mortality_rate <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mortality_rate_tbl<span class="sc">$</span>mortality_rate)</span>
<span id="cb12-42"><a href="#cb12-42"></a></span>
<span id="cb12-43"><a href="#cb12-43"></a><span class="co"># 3.4 Left join from 2 tables</span></span>
<span id="cb12-44"><a href="#cb12-44"></a></span>
<span id="cb12-45"><a href="#cb12-45"></a>mortality_rate_map <span class="ot">&lt;-</span> <span class="fu">left_join</span>(mortality_rate_tbl,world, <span class="at">by =</span> <span class="st">"region"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="04_data_visualization_cache/html/plot2_658ec840384e3d0873467caecfc67b1d">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># 4.0 DATA VISUALIZATION ----</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="fu">library</span>(scales)</span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co"># Map Plot</span></span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">ggplot</span>(mortality_rate_map, <span class="fu">aes</span>(<span class="at">map_id =</span> region, <span class="at">fill =</span> mortality_rate))<span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">geom_map</span>(<span class="at">map =</span> mortality_rate_map,  <span class="at">color =</span> <span class="st">"white"</span>)<span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> mortality_rate_map<span class="sc">$</span>long, <span class="at">y =</span> mortality_rate_map<span class="sc">$</span>lat) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low=</span><span class="st">'red'</span>, <span class="at">high=</span><span class="st">'grey20'</span>, <span class="at">labels =</span> percent) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a>  <span class="co"># add labels</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-14"><a href="#cb13-14"></a>    <span class="at">title =</span> <span class="st">"Confirmed COVID-19 Deaths Relative to Population"</span>,</span>
<span id="cb13-15"><a href="#cb13-15"></a>    <span class="at">caption =</span> <span class="st">"2022-04-16"</span>,</span>
<span id="cb13-16"><a href="#cb13-16"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb13-17"><a href="#cb13-17"></a>    <span class="at">y =</span> <span class="st">""</span>,</span>
<span id="cb13-18"><a href="#cb13-18"></a>    ) <span class="sc">+</span></span>
<span id="cb13-19"><a href="#cb13-19"></a>    </span>
<span id="cb13-20"><a href="#cb13-20"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-21"><a href="#cb13-21"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="04_data_visualization_files/figure-html/plot2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="04_data_visualization_files/figure-html/plot2-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","openEffect":"zoom","loop":true,"descPosition":"bottom"});</script>


</body></html>